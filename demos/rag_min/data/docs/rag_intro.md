# RAG 入门

## 什么是 RAG
RAG（Retrieval-Augmented Generation，检索增强生成）是一种把“检索系统”和“生成模型”组合起来的方法：先从外部知识库检索相关资料片段，再把片段作为上下文提供给模型生成答案。

## 基本流程
1. 数据准备：收集文档（Markdown、PDF、网页等）。
2. 切块（Chunking）：将文档切成较小片段，并保存元数据（来源、标题路径等）。
3. 向量化（Embedding）：把每个片段转换成向量表示。
4. 建索引：将向量写入向量索引（如 FAISS）。
5. 查询：对用户问题做向量化，在索引中检索 TopK 相关片段。
6. 生成：将检索片段拼入提示词，让模型基于片段回答，并输出引用。

## 为什么能降低幻觉
因为回答时有“证据上下文”：模型不需要纯凭参数记忆编造，而是基于检索到的片段组织语言。

## 常见坑
- 切块太大：检索命中但上下文噪声多。
- 切块太小：关键定义被拆散，命中片段不完整。
- 没有引用：即使答对也不可验证，难以排查问题。