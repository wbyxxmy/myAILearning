# RAG 教程 30：引用（Citations）与“有依据回答”

RAG 的关键不是“能回答”，而是“能说明依据”。

## 1. 为什么必须要引用
- 让用户能验证：这句话来自哪里
- 方便排查：是检索错了？还是资料错了？
- 方便迭代：命中不理想时能快速定位改 chunking / 索引 / 文档

如果没有引用，你很难把问题归因。

## 2. 引用应该包含什么信息
最小引用建议：
- `source_path`：哪个文件
- `chunk_id`：文件内第几个 chunk

本仓库 demo 采用的格式类似：
- `[rag_intro.md#chunk-3]`

你可以在工程化后扩展：
- 标题路径
- 字符范围（start/end char）
- 原文链接（如果知识库是网页或 Git 仓库文件）

## 3. “模板式回答”也要强制引用
即使你现在不接大模型，仍然建议：
- 每条要点后面附引用
- 不要输出“无来源的结论句”

`demos/rag_min/src/query.py` 的 `template_answer()` 就是在演示这种“先把证据链做对”的做法。

## 4. 判断引用质量的简单指标
你可以在评测中加入：
- 是否命中期望来源（expected_sources）
- TopK 里是否出现正确来源
- 引用是否覆盖核心要点（人工抽查即可）

---

## 📌 导航
- 上一章：[RAG 教程 20：检索与重排](./20_retrieval_and_rerank.md)
- 下一章：[RAG 教程 40：RAG 评测](./40_rag_evaluation.md)
- 返回总览：[根目录学习导航](../../README.md#-专题学习导航prompt--rag--skill)
